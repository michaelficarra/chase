\section{Technical Background}

	\subsection{Vocabulary}

		A \emph{vocabulary} consists of a set of pairings of \emph{relation
		symbols}, with a non-negative integral arity.

		A relation symbol, often called a \emph{predicate}, can be any unique
		symbol. It is used in conjunction with an arity to refer to relations
		in models.

	\subsection{Models}

		A \emph{model} $\mathbb{M}$ for a vocabulary $\mathcal{V}$ is a construct that consists of:
		\begin{itemize}
		\item a set, denoted $|\mathbb{M}|$, called the \emph{universe} or \emph{domain} of $\mathbb{M}$
		\item for each pairing of a predicate $R$ and an arity $k$ in $\mathcal{V}$, a relation $R^\mathbb{M}_k \subseteq |\mathbb{M}|$
		\end{itemize}
		It is important to distinguish the predicate, which is just a symbol,
		from the relation that it refers to when paired with its arity. The
		relation itself is a set of tuples of members from the universe.

	\subsection{First-order Logic}

		\emph{First-order logic}, also called \emph{predicate logic}, is a
		formal logic system. A first-order logic formula is defined inductively by
		\begin{itemize}
		\item if $R$ is a relation symbol of arity $k$ and each of $x_0 \ldots x_{k-1} \in \vec{x}$ is a variable, then $R(\vec{x})$ is a formula, specifically an \emph{atomic formula}
		\item if $x$ and $y$ are variables, then $x = y$ is a formula
		\item $\top$ and $\bot$ are formul{\ae}
		\item if $\alpha$ is a formula, then $(\neg\alpha)$ is a formula
		\item if $\alpha$ and $\beta$ are formul{\ae}, then $(\alpha \wedge \beta)$ is a formula
		\item if $\alpha$ and $\beta$ are formul{\ae}, then $(\alpha \vee \beta)$ is a formula
		\item if $\alpha$ and $\beta$ are formul{\ae}, then $(\alpha \to \beta)$ is a formula
		\item if $\alpha$ is a formula and $x$ is a variable, then $(\forall x : \alpha)$ is a formula
		\item if $\alpha$ is a formula and $x$ is a variable, then $(\exists x : \alpha)$ is a formula
		\end{itemize}

		For our purposes, this logic system will not contain any constant
		symbols or function symbols, which are commonly included in first-order
		logic. A function $f(x,y)$ can be encoded as the geometric logic
		formula $F(x,y,z1) \wedge F(x,y,z2) -> z1 = z2$.  Constant symbols can
		be encoded as relations with an arity of zero, for example $C()$.

		A shorthand notation may sometimes be used which omits either the left
		or right side of an implication and denotes ($\top \to \sigma$) and
		($\sigma \to \bot$) respectively.  If $\alpha$ is a formula and
		$\vec{x}$ is a set of variables of size $k$, then $(\forall \vec{x} :
		\alpha)$ is $(\forall x_0 \ldots \forall x_{k-1} : \alpha)$.  If
		$\alpha$ is a formula and $\vec{x}$ is a set of variables of size $k$,
		then $(\exists \vec{x} : \alpha)$ is $(\exists x_0 \ldots \exists
		x_{k-1} : \alpha)$.

	\subsection{Variable Binding}

		The set of free variables in a formula is defined inductively as follows
		\begin{itemize}
		\item any variable occurring in an atomic formula is a free variable
		\item the set of free variables in $\top$ and $\bot$ is $\emptyset$
		\item the set of free variables in $x = y$ is $\{x,y\}$
		\item the set of free variables in $\neg\alpha$ is $free(\alpha)$
		\item the set of free variables in $\alpha \wedge \beta$ is $free(\alpha) \cup free(\beta)$
		\item the set of free variables in $\alpha \vee   \beta$ is $free(\alpha) \cup free(\beta)$
		\item the set of free variables in $\alpha \to    \beta$ is $free(\alpha) \cup free(\beta)$
		\item the set of free variables in $\forall x : \alpha$ is $free(\alpha) - \{x\}$
		\item the set of free variables in $\exists x : \alpha$ is $free(\alpha) - \{x\}$
		\end{itemize}
		A formula $\alpha$ is a \emph{sentence} if $free(\alpha) = \emptyset$.

	\subsection{Environment}

		An \emph{environment} $\lambda$ for a model $\mathbb{M}$ is a function
		from a variable $v$ to a domain member $e$ where $e \in |\mathbb{M}|$.
		The syntax $\lambda_{[v \mapsto a]}$ denotes the environment
		$\lambda'(x)$ that returns $a$ when $x=v$ and returns $\lambda(x)$
		otherwise.

	\subsection{Satisfiability}

		A model $\mathbb{M}$ is said to satisfy a formula $\sigma$ in an
		environment $\lambda$, denoted $\mathbb{M} \models_\lambda \sigma$ and
		read ``under $\lambda$, $\sigma$ is true in $\mathbb{M}$", when
		\begin{itemize}
		\item $\sigma$ is a relation symbol $R$ and $R(\lambda(a_0) , \ldots , \lambda(a_n)) \in \mathbb{M}$ where $a$ is a set of variables
		\item $\sigma$ is of the form $\neg\alpha$ and $\mathbb{M} \not\models_\lambda \alpha$
		\item $\sigma$ is of the form $\alpha\wedge\beta$ and both $\mathbb{M} \models_\lambda \alpha$ and $\mathbb{M} \models_\lambda \beta$
		\item $\sigma$ is of the form $\alpha\vee\beta$ and either $\mathbb{M} \models_\lambda \alpha$ or $\mathbb{M} \models_\lambda \beta$
		\item $\sigma$ is of the form $\alpha\to\beta$ and either $\mathbb{M} \not\models_\lambda \alpha$ or $\mathbb{M} \models_\lambda \beta$
		\item $\sigma$ is of the form $\forall x : \alpha$  and for every $x' \in |\mathbb{M}|$, $\mathbb{M} \models_{\lambda[x \mapsto x']} \alpha$
		\item $\sigma$ is of the form $\exists x : \alpha$  and for at least one $x' \in |\mathbb{M}|$, $\mathbb{M} \models_{\lambda[x \mapsto x']} \alpha$
		\end{itemize}
		The notation $\mathbb{M} \models \sigma$ (no environment specification)
		means that, under the empty environment $l$, $\mathbb{M} \models_l \sigma$.

		A model $\mathbb{M}$ satisfies a set of formul{\ae} $\Sigma$ under an
		environment $\lambda$ if for every $\sigma$ such that $\sigma \in
		\Sigma$, $\mathbb{M} \models_\lambda \sigma$. This is denoted as
		$\mathbb{M} \models_\lambda \Sigma$ and read ``$\mathbb{M}$ is a model
		of $\Sigma$".

	\subsection{Entailment}

		Given an environment $\lambda$, a set of formul{\ae} $\Sigma$ is said
		to \emph{entail} a formula $\sigma$ ($\Sigma \models_\lambda \sigma$)
		if the set of all models satisfied by $\Sigma$ under $\lambda$ is a
		subset of the set of all models satisfying $\sigma$ under $\lambda$.

		The notation used for satisfiability and entailment is very similar, in
		that the operator used ($\models$) is the same, but they can be
		distinguished by the type of left operand.

	\subsection{Homomorphisms}

		A \emph{homomorphism} from $\mathbb{A}$ to $\mathbb{B}$ is a function
		$h: |\mathbb{A}|\to|\mathbb{B}|$ such that, for each relation symbol
		$R$ and tuple $\langle a_0 , \ldots , a_n \rangle$ where $a \subseteq
		|\mathbb{A}|$, $\langle a_0 , \ldots , a_n  \rangle \in R^\mathbb{A}$
		implies $\langle h(a_0) , \ldots , h(a_n) \rangle \in R^\mathbb{B}$.

		A homomorphism $h$ is also a \emph{strong homomorphism} if, for each
		relation symbol $R$ and tuple $\langle a_0 , \ldots , a_n \rangle$
		where $a \subseteq |\mathbb{A}|$, $\langle a_0 , \ldots , a_n  \rangle
		\in R^\mathbb{A}$ if and only if $\langle h(a_0) , \ldots , h(a_n)
		\rangle \in R^\mathbb{B}$.

		The notation $\mathbb{M} \preceq \mathbb{N}$ means that there exists a
		homomorphism $h : \mathbb{M} \to \mathbb{N}$. The identity function is
		a homomorphism from any model $\mathbb{M}$ to itself.  Homomorphisms
		have the property that $\mathbb{A} \preceq \mathbb{B} \wedge \mathbb{B}
		\preceq \mathbb{C}$ implies $\mathbb{A} \preceq \mathbb{C}$.

		However, $\mathbb{M} \preceq \mathbb{N} \wedge \mathbb{N} \preceq
		\mathbb{M}$ does not imply that $\mathbb{M} = \mathbb{N}$, but instead
		that $\mathbb{M}$ and $\mathbb{N}$ are \emph{homomorphically
		equivalent}.  For example, fix two models $\mathbb{M}$ and $\mathbb{N}$
		that are equivalent except that $\mathbb{N}$ has one more domain
		member than $\mathbb{M}$. Both $\mathbb{M} \preceq \mathbb{N}$ and
		$\mathbb{N} \preceq \mathbb{M}$ are true, yet $\mathbb{M} \neq
		\mathbb{N}$. Homomorphic Equivalence between a model $\mathbb{M}$ and a
		model $\mathbb{N}$ is denoted $\mathbb{M} \simeq \mathbb{N}$.

		Given models $\mathbb{M}$ and $\mathbb{N}$ where $\mathbb{M} \preceq
		\mathbb{N}$ and a formula in positive-existential form $\sigma$, if
		$\mathbb{M} \models \sigma$ then $\mathbb{N} \models \sigma$.

		A homomorphism $h : \mathbb{A} \to \mathbb{B}$ is also an
		\emph{isomorphism} when $h$ is 1:1 and onto and the inverse function
		$h^{-1} : \mathbb{B} \to \mathbb{A}$ is a homomorphism.

	\subsection{Minimal Models}

		Minimal models, also called \emph{universal} models, are models for a
		theory $T$ with the special property that there exists a homomorphism from
		the minimal model to any other model that satisfies $T$.  Intuitively,
		minimal models have no unnecessary entities or relations and thus
		display the least amount of constraint necessary to satisfy the theory
		for which they are minimal.

		A set of models $\mathcal{M}$ is said to be \emph{jointly minimal} for
		a set of formul{\ae} $\Sigma$ when every model $\mathbb{N}$ such that
		$\mathbb{N} \models \Sigma$ has a homomorphism from a model $\mathbb{M}
		\in \mathcal{M}$ to $\mathbb{N}$.

		More than one minimal model may exist for a given theory. Given a model
		$\mathbb{M}$ that is minimal for a theory $T$, any model $\mathbb{N}$
		such that $\mathbb{N} \simeq \mathbb{M}$ is also minimal for $T$.

		Not every theory must have a minimal model. A simple example of this is
		the theory containing a single formula $\sigma$ where $\sigma$ contains
		a disjunction. There exists no single minimal model for the formula $P
		\vee Q$ because any model that satisfies both $P$ and $Q$ would not
		have a homomorphism to a model that satisfies the theory with only $P$
		or $Q$ in its set of facts. However, the set containing a model
		$\mathbb{M}$ that contains $P$ in its set of facts and a model
		$\mathbb{N}$ that contains $Q$ in its set of fact would be jointly
		minimal.

	\subsection{Positive Existential Form}

		Formul{\ae} in \emph{positive existential form} are constructed using
		only conjunctions ($\wedge$), disjunctions ($\vee$), existential
		quantifications ($\exists$), tautologies ($\top$), contradictions
		($\bot$), equalities, and relations.

		\newtheorem{pef-theorems}{Theorem}

		\begin{pef-theorems}
			The set of models of a sentence $\sigma$ is closed under homomorphisms
			if and only if $\sigma$ is logically equivalent to a positive
			existential formula $\varphi$.
		\end{pef-theorems}

	\subsection{Geometric Logic}
	\label{sec:technical_background.geometric_logic}

		\emph{Geometric logic} formul{\ae} are implicitly universally
		quantified implications between positive existential formul{\ae}. More
		specifically, a geometric logic formula is of the form
		\[\forall\ (free(F_L) \cup free(F_R)) : F_L \to F_R\]
		where $free$ is the function that returns the set of all free variables
		for a given formula and both $F_L$ and $F_R$ are are first-order logic
		formul{\ae} in positive existential form.

		A set of geometric logic formul{\ae} is called a \emph{geometric
		theory}.

		It is convention to treat a positive existential formula $\sigma$ as
		$\top \to \sigma$ when expecting a geometric logic formula. It is also
		convention to treat a negated positive existential formula $\neg\sigma$
		as $\sigma \to \bot$.

		Examples of geometric logic formul{\ae}:

		\begin{tabular}{lll}
		\emph{reflexivity}   & \qquad  &  $\top \to R(x,x)$                  \\
		\emph{symmetry}      & \qquad  &  $R(x,y) \to R(y,x)$                \\
		\emph{transitivity}  & \qquad  &  $R(x,y) \wedge R(y,z) \to R(x,z)$  \\
		\end{tabular}

		Negation of a relation $R$ with arity $k$ can be implemented by
		introducing another relation $R'$ with arity $k$, adding two
		formul{\ae} of the form $R \wedge R' \to \bot$ and $\top \to R \vee
		R'$, and using $R'$ where $\neg R$ would be used.

